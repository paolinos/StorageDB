function StorageDB(a,b){window.indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,window.IDBTransaction=window.IDBTransaction||window.webkitIDBTransaction||window.msIDBTransaction,window.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange||window.msIDBKeyRange,indexedDB||window.alert("Your browser doesn't support a stable version of IndexedDB. Such and such feature will not be available.");const c=1;var e=a,f=function(a){var b=indexedDB.open(e,c);b.onsuccess=function(b){a(b.target.result)},b.onerror=function(){a(null)}},g=function(a,b){var c=a.openCursor(),d=[];c.onsuccess=function(e){var f=e.target.result;f?(c=a.get(f.key),c.onsuccess=function(a){d[d.length]=a.target.result},f.continue()):b(d)}},h=function(a,b,c){var d=a.openCursor(),f=0;d.onsuccess=function(a){var d=a.target.result;if(d){var e=d.value,g=!0;for(var h in b)if(e[h]===b[h]){g=!1;var i=d.delete(d.value);i.onsuccess=function(){f++,d.continue()},i.error=function(){console.error("Error deleting element.")}}g&&d.continue()}else 0===f?c(!1,f):c(!0,f)}},i=function(){var a=indexedDB.open(e,c);a.onupgradeneeded=function(a){for(var c=a.target.result,d=0;d<b.length;d++)c.createObjectStore(b[d],{keyPath:"id",autoIncrement:!0})},a.onsuccess=function(){},a.onerror=function(){console.error("initDB - onerror")}};i(),this.checkDB=function(){var a=indexedDB.open(e,c);a.onupgradeneeded=function(a){for(var c=a.target.result,d=0;d<b.length;d++)c.createObjectStore(b[d],{keyPath:"id",autoIncrement:!0})},a.onsuccess=function(a){var b=a.target.result;b.close()},a.onerror=function(){console.error("db - onerror")}},this.destroy=function(a){var b=indexedDB.deleteDatabase(e);b.onsuccess=function(){a&&a(!0)},b.onerror=function(){a&&a(!1)}},this.getById=function(a,b,c){f(function(d){null===d&&console.error("Error trying to connect with db");var e;try{var f=d.transaction(a,"readonly"),g=f.objectStore(a);e=g.get(b),e.onsuccess=function(){e.result?c(!0,e.result):c(!0,null)},e.onerror=function(){void 0!==c&&c(!1)}}catch(h){8===h.code&&console.warn("Maybe there are one problem with the versions. Sometimes happens with Mozilla."),void 0!==c&&c(!1)}d.close()})},this.get=function(a,b,c){if(void 0!==b){var d=[];this.getAll(a,function(a,e){if(a){for(var f=e.length-1;f>=0;f--){var g=e[f];for(var h in b)if(g[h]===b[h]){d[d.length]=g;break}}c&&c(d)}})}},this.getAll=function(a,b){f(function(c){null===c&&console.error("Error trying to connect with db");var d;try{var e=c.transaction(a,"readonly"),f=e.objectStore(a);d=f.count(),d.onsuccess=function(){g(f,function(a){void 0!==b&&b(!0,a)})},d.onerror=function(){console.log("result.onerror"),void 0!==b&&b(!1)}}catch(h){console.log(h),8===h.code&&console.warn("Maybe there are one problem with the versions. Sometimes happens with Mozilla."),void 0!==b&&b(!1)}c.close()})},this.addTo=function(a,b,c){f(function(d){null===d&&console.error("Error trying to connect with db");var e;try{var f=d.transaction(a,"readwrite"),g=f.objectStore(a);e=g.add(b)}catch(h){throw h}e.onsuccess=function(a){void 0!==c&&c(!0,a.target.result)},e.onerror=function(){console.log("result.onerror"),void 0!==c&&c(!1)}})},this.remove=function(a,b,c){f(function(d){null===d&&console.error("Error trying to connect with db");var e;try{var f=d.transaction(a,"readwrite"),g=f.objectStore(a);e=g.count(),e.onsuccess=function(){h(g,b,function(a,b){void 0!==c&&c(a,b)})},e.onerror=function(){void 0!==c&&c(!1)}}catch(i){console.log(i),8===i.code&&console.warn("Maybe there are one problem with the versions. Sometimes happens with Mozilla."),void 0!==c&&c(!1)}d.close()})}}